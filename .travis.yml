language: node_js
node_js:
- "11"
sudo: false
script:
- npm run test:ci
- npm run build
- |
  if [ "$TRAVIS_TEST_RESULT" == "0" ]; then
    npm run publish:autotag;
  fi
- |
  if [ "$TRAVIS_TEST_RESULT" == "0" ] && [ "$TRAVIS_SECURE_ENV_VARS" == "true" ] && [ "x$TRAVIS_TAG" != "x" ]; then
    npm run publish:cdn;
  fi
env:
  global:
  # CDN_SECRET
  - secure: jLpBZ3uiiMuJRrSaEUWu8DQupnnsk8+KeaLMVCtft0XiQ2GtKacmoxY6hChyngnd0ry+xja4f4cFnCWjtSnaEEE199M8QTEUs603VFGs9GixD7N2vuJvNU+y/uJm6HpQzwncQTJq5IzTiRgMZ/418F5eiHUyDYbAi/hK9kaPZp5Me9hfD02IMMbgHxcvm3/zyKNZb5Mr0+lguvBhf6TCC+DG7I2LL1pjtqYHxEv2Gq2P95DPzx5bNEkmKsK3C/M2Dw9rMjGg74OMNVWmGcvdDPifdOm9TnjjOpyff/qe4ik4OEeGXONQLtVp0PtZnSRgHruhnhCqejkHiFHmDqMzrSSYj6fYghB4X3r2MlLFKEoH4fTmUgCFRVWqCO3WE3Je4T7Xy5QDBZmcamXVQXPEDL5c1Az2AKEFS8A5fxBU/z470cUt59NO6l5u1//HM6uAoAhSSHjEzHORinWJxqUF6gSlS9CnGH/cYK61zsUYMDY42+G297OmRdgUCAnQyUS6GPVMtnPVyuq6Vm9rkFxuEnkTVoSYEv8WXWwomnVxPXPaXt2BF4h32yIkwE7G45PThcrhAVKrUxZ6p0tg+ZTRhcE3+GzIJPRAzno3VXr0Xz3225oIAYgvDF6uIj9GHRoQB+VuQ1NR+Mr6NdtZGBqTtbtMYtyYCkcOGiUwmM4J0HA=
  # GITHUB_TOKEN
  - secure: MLxmozticV2Zdmm96znAr4ZSXWF2ztB3DU7+9hH99LsSRj8Wly190sb7gbNY3Y5aw/3NKVO1TBdt7VvPxC2zFzzqYXbR3zpEPHkPt7YAuB8Q5jFLLYfF2i2Cxrozu5FYM5qA0dpxQZ7u3miBOp8tATFOtJQuXjaTh56FGewrcfXCantdJoPCgSmuwdi1cvfBTmRD/pDb1X5P7sC7KmROdfAZEHwAVgwMf5h5xpVvKnh245qPtkM/vg4hkTqI/72nmaV7LMrG0Uio39XOMFwjOFzvOqBcbuyNXjgNVuF0pbRvSdEUMKEtvwZ8IhwV/yCKAVymSLFbZtDmbqJk7tEn9Atp/iTATTpzxFU547DcPW7YL+vakL3sCKhukxz4VzwGDosyZIc1zgrBaS6u+q4U14JkuN55UaPlnbc+AHxYr3of+ahuaGD93wMam9uzsMuFMvfXExVitZ4s9lvCK8bwz6jJ0CK5+p1zkA1U0A3vH1skAZvwv/gdUppXO7OLc4fXSV8VSDvkiBRh7vtNc0rUsS3V053M4PRokuhsviQhacda2BsticTAC/yRuTjFBj+Puun8QYuq+tghALXyIUAzWXlP/BV8s6JrrmooeyRz2REuu795kdu+NIT8E80hJHzYbbiNdGk9mZ1ER7wEaL6uUAUyAiBAoTAhFuvmKkDSBEA=
  # RALLY_API_KEY
  - secure: DHFdl8Lb94EZtKvq4uvpu9BLB4KOw00pkH40TQmFhJGDNo6uJ1mK/fD5UtBe/MY1RW9v1TK6Bh3F/VArp3RwdtNwcmcG/wTHKYJFhGMgEwlv08eeHJ3GePKJsbeUFjBj9rBPK6XylUfXa6AWCNV5wc4u3edDoKxEJ7OxDMyYv94hFxADsIjbLHVn2Z8cqE6gSbAY+kwEVxXWDSUUEkzAsEOxrdngAOMx9YSEp+SyY2tEzUbq7qXHa7r10aVMaFpX9glpKgiftSfRW5ySiJeUU6JYLoFLE0J52E+A/LRGIjL+i4p/yDblPhM6Gpd84GCBBNyMDX3u/RueAGZ2H6W8y0oJJcvCHOi6cdbu0hFYsWALT1kj5Gchp33NtuEsh78WcziaU+L4Fo+9ELuepiAAhu98eoTFiOHVqhSbnPFkzAUTx1uF4OOGG7ZGLrp0dzB9v3SYM0XTJQ0RmlO4XbWrXhbC5haX4PzV/HKzT6Af1C7SLCjeI4FsSxmW119Km4DvxFskOzKg40CZI3IyQk3aiH/okWYegrLl48Wu1nvgP/uGbBGA51P0x2D8OseO8TkIqlR+DYbgETIUbnpawgYrZq1J9UFlZiJIFKGET9WZiJvqXoojhq02zrnHwAzAeG0ogXGU0/JTsbnISA+WMMY3h0C/92Ntl/jDsoy3BL1TP+U=
